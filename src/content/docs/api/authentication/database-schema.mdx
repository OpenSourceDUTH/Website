---
title: Database Schema
description: An overview of the database schema and relations used for the system.
---
The database schema is built to handle a multi-tenant feature management system with OAuth-based authentication for user accounts and a higherarchical token system for each feature.
A _user_ (users, sessions) logs in to a management interface via _OAuth2_ (oauth_identities, oauth_states`) and can _create tokens_ (tokens) that have access to _specific feature slugs_ -children of the main feature parent- (features) 
with defined quotas that can be overriden (group_feature_quotas, user_quota_overrides) and optional IP whitelisting (token_allowed_ips). A user who loggs in with an _academic domain_ which is a predefined _group_ (academic_domains, gorups) has 
higher default quotas and all API usage (usage_log) is logged for auditing and analytics purposes. 

##### Groups (groups)

<p>
id - integer, primary key <br></br>
name - string <br></br>
default_rpm - integer, default 60 <br></br>
description - text
created_at - timestamp, default current_timestamp
</>

##### Academic Domains (academic_domains)

##### Users (users)

##### OAuth Identities (oauth_identities)

##### OAuth States (oauth_states)

##### Sessions (sessions)

##### Features (features)

##### Group Feature Quotas (group_feature_quotas)

##### User Quota Overrides (user_quota_overrides)
    
##### Tokens (tokens)

##### Token Features (token_features)

##### Token Allowed IPs (token_allowed_ips)

##### Usage Log (usage_log)
