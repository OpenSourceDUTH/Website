ErrorDocument 404 /404.html
ErrorDocument 400 /404.html
ErrorDocument 403 /404.html
ErrorDocument 500 /404.html

# Try multiple approaches for Plesk
RewriteEngine On

# First try: Direct file check
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ [NC]
RewriteRule ^(.*)$ /404.html [L,R=404]

# Fallback for any remaining 404s
RewriteCond %{ENV:REDIRECT_STATUS} ^$
RewriteRule ^(.*)$ /404.html [L]

# Ensure 404.html can be accessed directly
<Files "404.html">
    Order allow,deny
    Allow from all
    Header always set Cache-Control "no-cache, no-store, must-revalidate"
</Files>
